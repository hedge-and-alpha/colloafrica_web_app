<form class="mt-8" [formGroup]="form" (ngSubmit)="handleSubmit()">
  <div class="mb-6">
    <ca-form-field
      label="Account Number"
      labelFor="account-number"
      [isRequired]="true"
    >
      <input
        type="text"
        id="account-number"
        placeholder="0123456789"
        formControlName="account_number"
        [ngClass]="{
          'ng-dirty ng-touched': isSubmitted && accountNumber?.invalid
        }"
      />
    </ca-form-field>
    @if (isSubmitted && (accountNumber?.invalid)) {
    <ca-form-error [errors]="accountNumber?.errors" />
    }
  </div>

  <div>
    <ca-form-field label="Select Bank" labelFor="bank" [isRequired]="true">
      <div class="-mx-5 grow">
        <ng-select
          class="px-2"
          placeholder="Select bank"
          labelForId="bank"
          notFoundText="No banks found"
          bindLabel="bank_name"
          bindValue="bank_name"
          formControlName="bank_name"
          appendTo="body"
          [items]="banks$ | async"
          [ngClass]="{
            'ng-dirty ng-touched': isSubmitted && bankName?.invalid
          }"
          (change)="handleSelectBank($event)"
        >
        </ng-select>
      </div>
    </ca-form-field>
    @if (isSubmitted && (bankName?.invalid)) {
    <ca-form-error [errors]="bankName?.errors" />
    }
  </div>

  <div class="mt-11 text-end">
    <button class="w-52" type="submit" ca-button-primary [loading]="loading">
      Proceed
    </button>
  </div>
</form>
