{
  "version": 3,
  "sources": ["src/app/services/api/auth-api.service.ts"],
  "sourcesContent": ["import { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from '../../../environments/environment';\r\nimport { ApiResponse } from '../../interfaces/api-response';\r\nimport { tap } from 'rxjs';\r\nimport { Router } from '@angular/router';\r\nimport { User } from '../../interfaces/user';\r\nimport { UserStoreService } from '../../stores+/user.store';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthApiService {\r\n  private AUTH_TOKEN = localStorage.getItem('AUTH_TOKEN');\r\n  private readonly baseUrl = environment.API_BASE_URL;\r\n\r\n  constructor(\r\n    private readonly http: HttpClient,\r\n    private router: Router,\r\n    private userStore: UserStoreService\r\n  ) {}\r\n\r\n  registerUser(data: object) {\r\n    return this.http.post<ApiResponse>(`${this.baseUrl}/auth/register`, data);\r\n  }\r\n\r\n  EmailVerification(code: string) {\r\n    return this.http.post<ApiResponse>(`${this.baseUrl}/auth/verification`, {\r\n      verification_code: code,\r\n    });\r\n  }\r\n\r\n  resendVerificationCode(email: string) {\r\n    return this.http.post<ApiResponse>(\r\n      `${this.baseUrl}/auth/resend-verification-code`,\r\n      { email }\r\n    );\r\n  }\r\n\r\n  login(data: object) {\r\n    return this.http\r\n      .post<ApiResponse & { data: { user: User; token: string } }>(\r\n        `${this.baseUrl}/auth/login`,\r\n        data\r\n      )\r\n      .pipe(\r\n        tap(({ data: { user, token } }) => {\r\n          this.userStore.user = user;\r\n          localStorage.setItem('AUTH_TOKEN', token);\r\n        })\r\n      );\r\n  }\r\n\r\n  forgotPassword(email: string) {\r\n    return this.http.post<ApiResponse>(`${this.baseUrl}/auth/forgot-password`, {\r\n      email,\r\n    });\r\n  }\r\n\r\n  resetPassword(data: object) {\r\n    return this.http.post<ApiResponse>(\r\n      `${this.baseUrl}/auth/reset-password`,\r\n      data\r\n    );\r\n  }\r\n\r\n  logoutUser() {\r\n    return this.http.post<ApiResponse>(`${this.baseUrl}/auth/logout`, null, {\r\n      headers: new HttpHeaders().append(\r\n        'Authorization',\r\n        `Bearer ${this.AUTH_TOKEN}`\r\n      ),\r\n    });\r\n  }\r\n}\r\n"],
  "mappings": "gKAYA,IAAaA,GAAc,IAAA,CAArB,IAAOA,EAAP,MAAOA,CAAc,CAIzBC,YACmBC,EACTC,EACAC,EAA2B,CAFlB,KAAAF,KAAAA,EACT,KAAAC,OAAAA,EACA,KAAAC,UAAAA,EANF,KAAAC,WAAaC,aAAaC,QAAQ,YAAY,EACrC,KAAAC,QAAUC,EAAYC,YAMpC,CAEHC,aAAaC,EAAY,CACvB,OAAO,KAAKV,KAAKW,KAAkB,GAAG,KAAKL,OAAO,iBAAkBI,CAAI,CAC1E,CAEAE,kBAAkBC,EAAY,CAC5B,OAAO,KAAKb,KAAKW,KAAkB,GAAG,KAAKL,OAAO,qBAAsB,CACtEQ,kBAAmBD,EACpB,CACH,CAEAE,uBAAuBC,EAAa,CAClC,OAAO,KAAKhB,KAAKW,KACf,GAAG,KAAKL,OAAO,iCACf,CAAEU,MAAAA,CAAK,CAAE,CAEb,CAEAC,MAAMP,EAAY,CAChB,OAAO,KAAKV,KACTW,KACC,GAAG,KAAKL,OAAO,cACfI,CAAI,EAELQ,KACCC,EAAI,CAAC,CAAET,KAAM,CAAEU,KAAAA,EAAMC,MAAAA,CAAK,CAAE,IAAM,CAChC,KAAKnB,UAAUkB,KAAOA,EACtBhB,aAAakB,QAAQ,aAAcD,CAAK,CAC1C,CAAC,CAAC,CAER,CAEAE,eAAeP,EAAa,CAC1B,OAAO,KAAKhB,KAAKW,KAAkB,GAAG,KAAKL,OAAO,wBAAyB,CACzEU,MAAAA,EACD,CACH,CAEAQ,cAAcd,EAAY,CACxB,OAAO,KAAKV,KAAKW,KACf,GAAG,KAAKL,OAAO,uBACfI,CAAI,CAER,CAEAe,YAAU,CACR,OAAO,KAAKzB,KAAKW,KAAkB,GAAG,KAAKL,OAAO,eAAgB,KAAM,CACtEoB,QAAS,IAAIC,EAAW,EAAGC,OACzB,gBACA,UAAU,KAAKzB,UAAU,EAAE,EAE9B,CACH,yCA7DWL,GAAc+B,EAAAC,CAAA,EAAAD,EAAAE,CAAA,EAAAF,EAAAG,CAAA,CAAA,CAAA,wBAAdlC,EAAcmC,QAAdnC,EAAcoC,UAAAC,WAFb,MAAM,CAAA,EAEd,IAAOrC,EAAPsC,SAAOtC,CAAc,GAAA",
  "names": ["AuthApiService", "constructor", "http", "router", "userStore", "AUTH_TOKEN", "localStorage", "getItem", "baseUrl", "environment", "API_BASE_URL", "registerUser", "data", "post", "EmailVerification", "code", "verification_code", "resendVerificationCode", "email", "login", "pipe", "tap", "user", "token", "setItem", "forgotPassword", "resetPassword", "logoutUser", "headers", "HttpHeaders", "append", "\u0275\u0275inject", "HttpClient", "Router", "UserStoreService", "factory", "\u0275fac", "providedIn", "_AuthApiService"]
}
