import{a as $}from"./chunk-JWWMHESD.js";import{a as b}from"./chunk-IMEIHFKW.js";import{a as I}from"./chunk-PZH53WPJ.js";import{a as z}from"./chunk-BM2XRWJR.js";import{a as O}from"./chunk-WZUBMPMB.js";import{a as k}from"./chunk-C35JOCL5.js";import{m as N}from"./chunk-6AAVNBZZ.js";import{b as B,c as M}from"./chunk-6FJPZUDG.js";import{Ab as _,Bb as C,Fc as R,Mb as h,Sa as i,Sb as F,Ta as f,Ub as g,gd as q,ib as w,id as d,kb as t,kd as E,ld as P,od as A,pb as v,pd as D,qa as S,sd as V,tb as l,td as T,ub as n,vb as m,xd as j,yd as G,zd as L}from"./chunk-22TXYSPT.js";var y=r=>({"ng-dirty ng-touched":r});function J(r,o){if(r&1&&m(0,"ca-form-error",7),r&2){let s=C();t("errors",s.otp==null?null:s.otp.errors)}}function K(r,o){if(r&1&&m(0,"ca-form-error",7),r&2){let s=C();t("errors",s.password==null?null:s.password.errors)}}function Q(r,o){if(r&1&&m(0,"ca-form-error",7),r&2){let s=C();t("errors",s.form.errors)}}var le=(()=>{let o=class o{constructor(p,a,e,c){this.fb=p,this.router=a,this.api=e,this.alertService=c,this.isSubmitted=!1,this.loading=!1,this.form=this.fb.group({otp:[null,[d.required,d.pattern(/\d{6}/),d.max(999999)]],password:[null,[d.required,b()]],password_confirmation:[null,[d.required,b()]]},{validators:[$],updateOn:"submit"})}get otp(){return this.form.get("otp")}get password(){return this.form.get("password")}get passwordConfirmation(){return this.form.get("password_confirmation")}handleSubmit(){if(this.isSubmitted=!0,this.form.invalid)return;this.loading=!0;let{otp:p,password:a,password_confirmation:e}=this.form.value,c={password:a,password_confirmation:e,otp:`${p}`};this.api.resetPassword(c).subscribe({next:({message:u,status:H})=>{this.loading=!1,this.form.reset(),this.alertService.open("success",{summary:H,details:u}),this.router.navigate(["/","auth"])},error:u=>{this.loading=!1,this.alertService.open("danger",{summary:u.error.status+" "+u.status,details:u.error.message})}})}};o.\u0275fac=function(a){return new(a||o)(f(j),f(N),f(O),f(k))},o.\u0275cmp=S({type:o,selectors:[["ca-reset-password"]],standalone:!0,features:[F],decls:21,vars:17,consts:[[1,"text-center","pt-6","max-w-[32.25rem]","mx-auto"],[1,"mt-5","mb-8"],[1,"leading-1.2","font-semibold"],[3,"ngSubmit","formGroup"],[1,"mb-6"],["label","Reset password code","labelFor","code",3,"isRequired"],["id","code","type","number","formControlName","otp","inputmode","numeric",3,"ngClass"],[1,"block","text-start",3,"errors"],["label","New password","labelFor","new_password",3,"isRequired"],["id","new_password","type","password","formControlName","password",3,"ngClass"],["label","Confirm Password","labelFor","confirm_password",3,"isRequired"],["type","password","id","confirm_password","formControlName","password_confirmation",3,"ngClass"],[1,"max-w-[25rem]","my-16","mx-auto"],["type","submit","ca-button-primary","",1,"w-full",3,"loading"]],template:function(a,e){a&1&&(l(0,"ca-auth-form-layout")(1,"div",0)(2,"hgroup",1)(3,"h1",2),h(4,"Reset password"),n()(),l(5,"form",3),_("ngSubmit",function(){return e.handleSubmit()}),l(6,"div",4)(7,"ca-form-field",5),m(8,"input",6),n(),w(9,J,1,1,"ca-form-error",7),n(),l(10,"div",4)(11,"ca-form-field",8),m(12,"input",9),n(),w(13,K,1,1,"ca-form-error",7),n(),l(14,"div")(15,"ca-form-field",10),m(16,"input",11),n(),w(17,Q,1,1,"ca-form-error",7),n(),l(18,"div",12)(19,"button",13),h(20," Save "),n()()()()()),a&2&&(i(5),t("formGroup",e.form),i(2),t("isRequired",!0),i(),t("ngClass",g(11,y,e.isSubmitted&&((e.otp==null?null:e.otp.dirty)||(e.otp==null?null:e.otp.invalid)))),i(),v(9,e.isSubmitted&&(e.otp!=null&&e.otp.dirty||e.otp!=null&&e.otp.invalid)?9:-1),i(2),t("isRequired",!0),i(),t("ngClass",g(13,y,e.isSubmitted&&((e.password==null?null:e.password.dirty)||(e.password==null?null:e.password.invalid)))),i(),v(13,e.isSubmitted&&(e.password!=null&&e.password.dirty||e.password!=null&&e.password.invalid)?13:-1),i(2),t("isRequired",!0),i(),t("ngClass",g(15,y,e.isSubmitted&&((e.passwordConfirmation==null?null:e.passwordConfirmation.dirty)||(e.passwordConfirmation==null?null:e.passwordConfirmation.invalid)))),i(),v(17,e.isSubmitted&&(e.passwordConfirmation!=null&&e.passwordConfirmation.dirty||e.passwordConfirmation!=null&&e.passwordConfirmation.invalid)?17:-1),i(2),t("loading",e.loading))},dependencies:[G,A,q,D,E,P,V,T,R,z,M,L,B,I]});let r=o;return r})();export{le as ResetPasswordComponent};
//# sourceMappingURL=reset-password.component-5X7Z3GGZ.js.map
