{
  "version": 3,
  "sources": ["src/app/modules/auth/pages/reset-password/reset-password.component.ts", "src/app/modules/auth/pages/reset-password/reset-password.component.html"],
  "sourcesContent": ["import { Component } from '@angular/core';\r\nimport { FormFieldComponent } from '../../../../components/form-field/form-field.component';\r\nimport { AuthFormLayoutComponent } from '../../layouts/auth-form-layout/auth-form-layout.component';\r\nimport { ButtonPrimaryDirective } from '../../../../directives/button-primary/button-primary.directive';\r\nimport {\r\n  FormBuilder,\r\n  FormControl,\r\n  FormGroup,\r\n  ReactiveFormsModule,\r\n  Validators,\r\n} from '@angular/forms';\r\nimport { emptyFieldValidator } from '../../../../validators/emptyField.validator';\r\nimport { NgClass } from '@angular/common';\r\nimport { FormErrorComponent } from '../../../../components/form-error/form-error.component';\r\nimport { matchPasswordValidator } from '../../../../validators/matchPassword.validator';\r\nimport { ButtonLoadingDirective } from '../../../../directives/button-loading/button-loading.directive';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { Router } from '@angular/router';\r\nimport { AlertService } from '../../../../components/alert/alert.service';\r\nimport { AuthApiService } from '../../../../services/api/auth-api.service';\r\n\r\n@Component({\r\n  selector: 'ca-reset-password',\r\n  standalone: true,\r\n  templateUrl: './reset-password.component.html',\r\n  styleUrl: './reset-password.component.css',\r\n  imports: [\r\n    ReactiveFormsModule,\r\n    NgClass,\r\n    AuthFormLayoutComponent,\r\n    ButtonLoadingDirective,\r\n    ButtonPrimaryDirective,\r\n    FormErrorComponent,\r\n    FormFieldComponent,\r\n  ],\r\n})\r\nexport class ResetPasswordComponent {\r\n  isSubmitted = false;\r\n  loading = false;\r\n\r\n  form: ResetPasswordForm = this.fb.group(\r\n    {\r\n      otp: [\r\n        null,\r\n        [\r\n          Validators.required,\r\n          Validators.pattern(/\\d{6}/),\r\n          Validators.max(999999),\r\n        ],\r\n      ],\r\n      password: [null, [Validators.required, emptyFieldValidator()]],\r\n      password_confirmation: [\r\n        null,\r\n        [Validators.required, emptyFieldValidator()],\r\n      ],\r\n    },\r\n    { validators: [matchPasswordValidator], updateOn: 'submit' }\r\n  );\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private router: Router,\r\n    private api: AuthApiService,\r\n    private alertService: AlertService\r\n  ) {}\r\n\r\n  get otp() {\r\n    return this.form.get('otp');\r\n  }\r\n  get password() {\r\n    return this.form.get('password');\r\n  }\r\n  get passwordConfirmation() {\r\n    return this.form.get('password_confirmation');\r\n  }\r\n\r\n  handleSubmit() {\r\n    this.isSubmitted = true;\r\n\r\n    if (this.form.invalid) return;\r\n\r\n    this.loading = true;\r\n\r\n    const { otp, password, password_confirmation } = this.form.value;\r\n    const data = { password, password_confirmation, otp: `${otp}` };\r\n\r\n    this.api.resetPassword(data).subscribe({\r\n      next: ({ message, status }) => {\r\n        this.loading = false;\r\n        this.form.reset();\r\n        this.alertService.open('success', {\r\n          summary: status,\r\n          details: message,\r\n        });\r\n        this.router.navigate(['/', 'auth']);\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.loading = false;\r\n        this.alertService.open('danger', {\r\n          summary: error.error.status + ' ' + error.status,\r\n          details: error.error.message,\r\n        });\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\ntype ResetPasswordForm = FormGroup<{\r\n  otp: FormControl<null>;\r\n  password: FormControl<null>;\r\n  password_confirmation: FormControl<null>;\r\n}>;\r\n", "<ca-auth-form-layout>\r\n  <div class=\"text-center pt-6 max-w-[32.25rem] mx-auto\">\r\n    <hgroup class=\"mt-5 mb-8\">\r\n      <h1 class=\"leading-1.2 font-semibold\">Reset password</h1>\r\n    </hgroup>\r\n\r\n    <form [formGroup]=\"form\" (ngSubmit)=\"handleSubmit()\">\r\n      <div class=\"mb-6\">\r\n        <ca-form-field\r\n          label=\"Reset password code\"\r\n          labelFor=\"code\"\r\n          [isRequired]=\"true\"\r\n        >\r\n          <input\r\n            id=\"code\"\r\n            type=\"number\"\r\n            formControlName=\"otp\"\r\n            inputmode=\"numeric\"\r\n            [ngClass]=\"{\r\n              'ng-dirty ng-touched': isSubmitted && (otp?.dirty || otp?.invalid)\r\n            }\"\r\n          />\r\n        </ca-form-field>\r\n        @if (isSubmitted && (otp?.dirty || otp?.invalid)) {\r\n        <ca-form-error [errors]=\"otp?.errors\" class=\"block text-start\" />\r\n        }\r\n      </div>\r\n\r\n      <div class=\"mb-6\">\r\n        <ca-form-field\r\n          label=\"New password\"\r\n          labelFor=\"new_password\"\r\n          [isRequired]=\"true\"\r\n        >\r\n          <input\r\n            id=\"new_password\"\r\n            type=\"password\"\r\n            formControlName=\"password\"\r\n            [ngClass]=\"{\r\n              'ng-dirty ng-touched':\r\n                isSubmitted && (password?.dirty || password?.invalid)\r\n            }\"\r\n          />\r\n        </ca-form-field>\r\n        @if (isSubmitted && (password?.dirty || password?.invalid)) {\r\n        <ca-form-error [errors]=\"password?.errors\" class=\"block text-start\" />\r\n        }\r\n      </div>\r\n\r\n      <div>\r\n        <ca-form-field\r\n          label=\"Confirm Password\"\r\n          labelFor=\"confirm_password\"\r\n          [isRequired]=\"true\"\r\n        >\r\n          <input\r\n            type=\"password\"\r\n            id=\"confirm_password\"\r\n            formControlName=\"password_confirmation\"\r\n            [ngClass]=\"{\r\n              'ng-dirty ng-touched':\r\n                isSubmitted &&\r\n                (passwordConfirmation?.dirty || passwordConfirmation?.invalid)\r\n            }\"\r\n          />\r\n        </ca-form-field>\r\n        @if (isSubmitted && (passwordConfirmation?.dirty ||\r\n        passwordConfirmation?.invalid)) {\r\n        <ca-form-error [errors]=\"form.errors\" class=\"block text-start\" />\r\n        }\r\n      </div>\r\n\r\n      <div class=\"max-w-[25rem] my-16 mx-auto\">\r\n        <button\r\n          type=\"submit\"\r\n          class=\"w-full\"\r\n          ca-button-primary\r\n          [loading]=\"loading\"\r\n        >\r\n          Save\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</ca-auth-form-layout>\r\n"],
  "mappings": "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",
  "names": ["\u0275\u0275element", "\u0275\u0275property", "ctx_r0", "otp", "errors", "password", "form", "ResetPasswordComponent", "constructor", "fb", "router", "api", "alertService", "isSubmitted", "loading", "group", "Validators", "required", "pattern", "max", "emptyFieldValidator", "password_confirmation", "validators", "matchPasswordValidator", "updateOn", "get", "passwordConfirmation", "handleSubmit", "invalid", "value", "data", "resetPassword", "subscribe", "next", "message", "status", "reset", "open", "summary", "details", "navigate", "error", "\u0275\u0275directiveInject", "FormBuilder", "Router", "AuthApiService", "AlertService", "selectors", "standalone", "features", "\u0275\u0275StandaloneFeature", "decls", "vars", "consts", "template", "rf", "ctx", "\u0275\u0275elementStart", "\u0275\u0275text", "\u0275\u0275elementEnd", "\u0275\u0275listener", "\u0275\u0275template", "ResetPasswordComponent_Conditional_9_Template", "ResetPasswordComponent_Conditional_13_Template", "ResetPasswordComponent_Conditional_17_Template", "\u0275\u0275advance", "\u0275\u0275pureFunction1", "_c0", "dirty", "\u0275\u0275conditional", "ReactiveFormsModule", "\u0275NgNoValidate", "DefaultValueAccessor", "NumberValueAccessor", "NgControlStatus", "NgControlStatusGroup", "FormGroupDirective", "FormControlName", "NgClass", "AuthFormLayoutComponent", "ButtonLoadingDirective", "ButtonPrimaryDirective", "FormErrorComponent", "FormFieldComponent", "_ResetPasswordComponent"]
}
