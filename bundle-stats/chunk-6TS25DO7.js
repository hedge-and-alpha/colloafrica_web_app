import{a as G}from"./chunk-6FJPZUDG.js";import{Ab as S,Bb as c,Ga as v,Gb as R,Hb as A,Ib as F,Rb as L,Sa as V,Sb as P,dd as k,f as s,g as _,gd as I,h,hd as N,id as m,jb as y,kb as b,kd as T,la as x,nd as g,pd as $,qa as w,qb as O,rb as E,rd as q,sb as D,tb as d,ub as f,ud as z,vd as Q,wd as U,ya as l,yd as j,za as p,zb as M}from"./chunk-22TXYSPT.js";var K=["input"];function B(u,n){if(u&1){let i=M();d(0,"input",3,0),S("input",function(e){l(i);let t=c();return p(t.handleInput(e))})("keyup",function(e){l(i);let t=c();return p(t.handleKeyUp(e))})("paste",function(e){let t=l(i).$index,r=c();return p(r.handlePaste(e,t))}),f()}if(u&2){let i=n.$implicit,a=n.$index;b("formControl",i),y("autocomplete",a===0?"one-time-password":null)}}var ie=(()=>{var n;let i=class i{constructor(){_(this,n,void 0);h(this,n,0),this.otpCode=[],this.errorsMap=x(G)}set size(e){h(this,n,e)}ngOnInit(){this.inputs=this.createFields(),this.otpControl=new g(null,[m.required,m.minLength(s(this,n)),m.maxLength(s(this,n))])}ngAfterViewInit(){this.inputRefs.first.nativeElement.focus()}createFields(){let e=new U([]);for(let t=0;t<s(this,n);t++)e.push(new g(""));return e}writeValue(e){e&&(e.length>s(this,n)&&(e=e.slice(0,s(this,n))),this.otpControl.setValue(e),this.inputs.setValue(new Array(...e.split(""))))}registerOnChange(e){this.valueChangesSub=this.otpControl.valueChanges.subscribe(e)}registerOnTouched(e){this.valueChangesSub=this.otpControl.valueChanges.subscribe(e)}handleInput(e){let t=e.target;if(!/\d/.test(t.value)){t.value="";return}let o=t.nextElementSibling;if(t.value.length>1){t.value=t.value.charAt(0);return}o&&o.focus(),this.setNewControlValue()}handleKeyUp(e){let t=e.target;if(e.key.toLowerCase()==="backspace"||e.key.toLowerCase()==="delete"){let o=t.previousElementSibling;o&&o.select()}this.setNewControlValue()}handlePaste(e,t){if(e.preventDefault(),t!==0)return;let r=e.clipboardData?.getData("text"),o=new RegExp(`/d${s(this,n)}/`).test(r||"");!r&&!o||(this.inputRefs.forEach((H,C)=>{this.inputs.at(C).setValue(r[C])}),this.setNewControlValue(),this.inputRefs.last.nativeElement.focus())}setNewControlValue(){this.otpControl.setValue(this.inputs.value.join(""))}validate(){let{errors:e}=this.otpControl;return e&&e.required?{required:!0}:e&&e.minlength?{minLength:!0}:e&&e.maxlength?{maxLength:!0}:null}ngOnDestroy(){this.valueChangesSub?.unsubscribe()}};n=new WeakMap,i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["ca-otp"]],viewQuery:function(t,r){if(t&1&&R(K,5,v),t&2){let o;A(o=F())&&(r.inputRefs=o)}},inputs:{size:"size"},standalone:!0,features:[L([{provide:k,useExisting:i,multi:!0},{provide:N,useExisting:i,multi:!0}]),P],decls:3,vars:0,consts:[["input",""],[1,"flex","justify-between"],["type","number","maxlength","1","max","9","inputmode","numeric",1,"rounded","text-center",3,"formControl"],["type","number","maxlength","1","max","9","inputmode","numeric",1,"rounded","text-center",3,"input","keyup","paste","formControl"]],template:function(t,r){t&1&&(d(0,"div",1),E(1,B,2,2,"input",2,O),f()),t&2&&(V(),D(r.inputs.controls))},dependencies:[j,I,$,T,Q,z,q],styles:[`[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:clamp(2.5rem,2.0833rem + 1.8519vw,3.75rem);aspect-ratio:1;border:1px solid #dcdcdc;background:#f6f6f6}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:is(:hover, [_ngcontent-%COMP%]:focus, [_ngcontent-%COMP%]:focus-visible){border-color:var(--purple);outline-color:var(--purple)}
/*# sourceMappingURL=otp.component.css.map */`]});let u=i;return u})();export{ie as a};
//# sourceMappingURL=chunk-6TS25DO7.js.map
