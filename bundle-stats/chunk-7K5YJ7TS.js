import{a as j,b as et,c as rt}from"./chunk-3O7MAVIL.js";import{a as nt}from"./chunk-IMEIHFKW.js";import{a as K}from"./chunk-PZH53WPJ.js";import{b as Q,c as tt,d as it,e as V}from"./chunk-6FJPZUDG.js";import{Aa as M,Ab as x,Bb as N,C as g,Fc as H,Mb as u,Nb as U,Ob as D,Sa as m,Sb as $,Ta as b,Ub as _,Yb as G,Zb as R,a as A,ad as q,b as P,ba as p,bb as y,f as r,fa as v,g as h,gd as Z,ib as I,id as E,ka as k,kb as B,kd as O,ld as z,od as Y,pb as L,qa as C,sd as W,tb as c,td as X,ub as l,vb as d,xd as J,zd as F}from"./chunk-22TXYSPT.js";var st=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=C({type:e,selectors:[["ca-x-circle-fill-icon"]],standalone:!0,features:[$],decls:4,vars:0,consts:[["width","82","height","81","viewBox","0 0 82 81","fill","none","xmlns","http://www.w3.org/2000/svg",1,"inline-block"],["x","2.44995","y","1.94922","width","77.1","height","77.1","rx","38.55","fill","#D92121"],["x","2.44995","y","1.94922","width","77.1","height","77.1","rx","38.55","stroke","#B00C0C","stroke-width","3"],["d","M53.9907 50.7501C54.3546 51.114 54.559 51.6075 54.559 52.1221C54.559 52.6367 54.3546 53.1302 53.9907 53.4941C53.6268 53.858 53.1333 54.0624 52.6187 54.0624C52.1041 54.0624 51.6106 53.858 51.2467 53.4941L40.9986 43.2428L30.7474 53.4909C30.3835 53.8547 29.89 54.0592 29.3754 54.0592C28.8608 54.0592 28.3672 53.8547 28.0034 53.4909C27.6395 53.127 27.4351 52.6335 27.4351 52.1189C27.4351 51.6043 27.6395 51.1107 28.0034 50.7469L38.2546 40.4988L28.0066 30.2475C27.6427 29.8836 27.4383 29.3901 27.4383 28.8755C27.4383 28.3609 27.6427 27.8674 28.0066 27.5035C28.3705 27.1396 28.864 26.9352 29.3786 26.9352C29.8932 26.9352 30.3867 27.1396 30.7506 27.5035L40.9986 37.7548L51.2499 27.5019C51.6138 27.138 52.1073 26.9336 52.6219 26.9336C53.1365 26.9336 53.63 27.138 53.9939 27.5019C54.3578 27.8658 54.5622 28.3593 54.5622 28.8739C54.5622 29.3885 54.3578 29.882 53.9939 30.2459L43.7426 40.4988L53.9907 50.7501Z","fill","white"]],template:function(t,i){t&1&&(M(),c(0,"svg",0),d(1,"rect",1)(2,"rect",2)(3,"path",3),l())},encapsulation:2});let n=e;return n})();var at=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=C({type:e,selectors:[["ca-seal-check-icon"]],standalone:!0,features:[$],decls:5,vars:0,consts:[["width","87","height","85","viewBox","0 0 87 85","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M83.2672 49.8708L83.2413 49.8836C80.1906 52.2232 78.898 56.2044 79.984 59.8885L79.9968 59.9144C81.7288 65.7699 77.4375 71.677 71.3362 71.8322H71.3104C67.4584 71.9356 64.0717 74.3915 62.792 78.0238V78.0366C60.7495 83.8017 53.7955 86.0637 48.7672 82.5864C45.6449 80.4544 41.5173 80.3432 38.2323 82.5864H38.2195C33.1913 86.0506 26.237 83.8015 24.2075 78.0236C22.9163 74.3823 19.5347 71.9353 15.6892 71.832H15.6633C9.56231 71.6768 5.27066 65.7698 7.00286 59.9142L7.01572 59.8883C8.10128 56.2042 6.80869 52.223 3.75835 49.8834L3.73245 49.8706C-1.11492 46.1477 -1.11492 38.8575 3.73245 35.1348L3.75835 35.122C6.80869 32.7824 8.10128 28.8011 7.00286 25.1171V25.0912C5.25762 19.2358 9.56213 13.3285 15.6633 13.1734H15.6892C19.5282 13.07 22.9278 10.614 24.2075 6.98182V6.96896C26.2368 1.20395 33.1913 -1.05807 38.2195 2.41918H38.2323C41.3991 4.60368 45.5872 4.60368 48.7672 2.41918C53.8461 -1.08814 60.7615 1.23854 62.792 6.96896V6.98182C64.0717 10.6011 67.4582 13.0701 71.3104 13.1734H71.3362C77.4374 13.3285 81.7288 19.2358 79.9968 25.0912L79.984 25.1171C78.898 28.8011 80.1906 32.7824 83.2413 35.122L83.2672 35.1348C88.1146 38.8575 88.1146 46.1479 83.2672 49.8708Z","fill","#3EB655"],["d","M43.5 66.5781C56.798 66.5781 67.5781 55.798 67.5781 42.5C67.5781 29.202 56.798 18.4219 43.5 18.4219C30.202 18.4219 19.4219 29.202 19.4219 42.5C19.4219 55.798 30.202 66.5781 43.5 66.5781Z","fill","#8BD399"],["opacity","0.1","d","M61.9874 27.087C57.8227 23.6609 52.4943 21.6015 46.6857 21.6015C33.3878 21.6015 22.6018 32.3876 22.6018 45.6854C22.6018 51.4941 24.6611 56.8224 28.0871 60.9872C22.7956 56.5731 19.425 49.9334 19.425 42.4995C19.425 29.2015 30.2019 18.4248 43.4997 18.4248C50.9337 18.4248 57.5734 21.7953 61.9874 27.087Z","fill","black"],["d","M37.7716 51.9256L32.447 46.2609C31.0526 44.7771 31.1246 42.4442 32.6078 41.0497C34.0911 39.6535 36.4251 39.7285 37.8183 41.2112L40.36 43.9142L51.164 31.5658C52.5032 30.0334 54.8324 29.878 56.3661 31.219C57.8986 32.5601 58.0533 34.8887 56.7129 36.4212L43.2317 51.8285C41.7955 53.4682 39.2609 53.5111 37.7716 51.9256Z","fill","white"]],template:function(t,i){t&1&&(M(),c(0,"svg",0),d(1,"path",1)(2,"path",2)(3,"path",3)(4,"path",4),l())},encapsulation:2});let n=e;return n})();function ut(n,e){n&1&&d(0,"ca-seal-check-icon",1)}function dt(n,e){n&1&&d(0,"ca-x-circle-fill-icon")}var T=(()=>{let e=class e{constructor(o){this.modalService=o,this.status="",this.message="",this.success=!0}closeModal(){this.modalService.close()}};e.\u0275fac=function(t){return new(t||e)(b(j))},e.\u0275cmp=C({type:e,selectors:[["ca-modal-status"]],inputs:{status:"status",message:"message",success:"success"},standalone:!0,features:[$],decls:10,vars:6,consts:[[1,"text-center"],[1,"flex","justify-center"],[1,"mt-6","mb-3","font-semibold","text-[2rem]","leading-5"],[1,"max-w-[22.25rem]","mb-11","mx-auto","leading-5"],["ca-button-primary","",1,"w-full",3,"click"]],template:function(t,i){t&1&&(c(0,"div",0),I(1,ut,1,0,"ca-seal-check-icon",1)(2,dt,1,0),c(3,"div",2),u(4),G(5,"capitalizeFirst"),l(),c(6,"p",3),u(7),l(),c(8,"button",4),x("click",function(){return i.closeModal()}),u(9),l()()),t&2&&(m(),L(1,i.success?1:2),m(3),D(" ",R(5,4,i.status)," "),m(3),U(i.message),m(2),D(" ",i.success?"Close":"Try again"," "))},dependencies:[F,st,at,rt],styles:[`[_nghost-%COMP%]   p[_ngcontent-%COMP%]{font-size:clamp(.875rem,.8333rem + .1852vw,1rem)}
/*# sourceMappingURL=modal-status.component.css.map */`]});let n=e;return n})();var ot=(()=>{var e,s;let o=class o{constructor(){h(this,e,y(null));h(this,s,y(null))}get bankAccounts(){return r(this,s)}get cards(){return r(this,e)}setBankAccounts(i){r(this,s).set(i)}addBankAccount(i){r(this,s).update(a=>[...a,i])}deleteBankAccount(i){let a=r(this,s).call(this).filter(f=>f.id!==i);this.setBankAccounts(a)}togglePrimaryAccount(i){let a=this.bankAccounts().findIndex(w=>w.id===i.id),f=this.bankAccounts().map(w=>P(A({},w),{primary:!1}));a>=0&&(f[a]=P(A({},i),{primary:!0}),r(this,s).set(f))}setBankCards(i){r(this,e).set(i)}addBankCard(i){r(this,e).update(a=>[...a,i])}deleteBankCard(i){let a=r(this,e).call(this).filter(f=>f.id!==i);this.setBankCards(a)}};e=new WeakMap,s=new WeakMap,o.\u0275fac=function(a){return new(a||o)},o.\u0275prov=v({token:o,factory:o.\u0275fac});let n=o;return n})();var ct=(()=>{var e;let s=class s{constructor(){h(this,e,y([]))}get transactions(){return r(this,e)}setTransactions(t){r(this,e).set(t)}updateTransactions(t){r(this,e).update(i=>[t,...i])}};e=new WeakMap,s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=v({token:s,factory:s.\u0275fac,providedIn:"root"});let n=s;return n})();var lt=(()=>{var e;let s=class s{constructor(){h(this,e,y([]))}get members(){return r(this,e)}setMembers(t){r(this,e).set(t)}};e=new WeakMap,s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=v({token:s,factory:s.\u0275fac,providedIn:"root"});let n=s;return n})();var pt=(()=>{var e;let s=class s{constructor(t,i,a,f,w){h(this,e,it.API_BASE_URL);this.http=t,this.userStore=i,this.cardBankStore=a,this.transactionStore=f,this.mgrStore=w}getUser(){return this.http.get(`${r(this,e)}/user`).pipe(g(({data:t})=>t.user),p(t=>{this.userStore.user=t}))}uploadProfilePicture(t){return this.http.post(`${r(this,e)}/user/upload/profile-pic`,t).pipe(p(i=>this.userStore.updateUser(i.data)))}updatePersonalInfo(t){return this.http.post(`${r(this,e)}/user/update/personal-info`,t).pipe(p(i=>this.userStore.updateUser(i.data)))}updatePersonalContactInfo(t){return this.http.post(`${r(this,e)}/user/update/contact-info`,t).pipe(p(i=>this.userStore.updateUser(i.data)))}updatePersonalEmploymentInfo(t){return this.http.post(`${r(this,e)}/user/update/employment-info`,t).pipe(p(i=>this.userStore.updateUser(i.data)))}updatePersonalNokInfo(t){return this.http.post(`${r(this,e)}/user/update/nextofkin-info`,t).pipe(p(i=>this.userStore.updateUser(i.data)))}updateIdCardDetails(t){return this.http.post(`${r(this,e)}/user/update/id-verification`,t).pipe(p(i=>this.userStore.updateUser(i.data)))}getBanks(){return this.http.get("https://api-apps.vfdbank.systems/vtech-wallet/api/v1/wallet2/bank").pipe(g(t=>t.data.bank.map(a=>({bank_name:a.name,bank_code:a.code}))))}getBankAccounts(){return this.http.get(`${r(this,e)}/bank`).pipe(g(t=>t.data.accounts),p(t=>{this.cardBankStore.setBankAccounts(t)}))}addBankAccount(t){return this.http.post(`${r(this,e)}/bank/add`,t).pipe(g(i=>i.data))}primaryBankAccount(t){return this.http.post(`${r(this,e)}/bank/primary/${t}`,null)}deleteBankAccount(t){return this.http.delete(`${r(this,e)}/bank/delete/${t}`)}getBankCards(){return this.http.get(`${r(this,e)}/card`).pipe(g(t=>t.data.cards),p(t=>this.cardBankStore.setBankCards(t)))}addBankCard(t){return this.http.post(`${r(this,e)}/card/add`,t).pipe(g(i=>i.data))}deleteBankCard(t){return this.http.delete(`${r(this,e)}/card/delete/${t}`)}changePassword(t){return this.http.post(`${r(this,e)}/user/change-password`,t)}verifyBvn(t){return this.http.post(`${r(this,e)}/virtual-account/create`,t)}getTransactions(t=1,i=10){return this.http.get(`${r(this,e)}/transaction?page=${t}&per_page=${i}`).pipe(p(({data:a})=>this.transactionStore.setTransactions(a.transactions)))}requestOtp(){return this.http.get(`${r(this,e)}/transaction/request-otp`)}initiateWithdrawal(t){return this.http.post(`${r(this,e)}/transaction/transfer`,t)}createMGR(t){return this.http.post(`${r(this,e)}/mgr`,t)}getAdminMGR(){return this.http.get(`${r(this,e)}/mgr/admin`)}getParticipantMGR(){return this.http.get(`${r(this,e)}/mgr/participant`)}getMGRById(t){return this.http.get(`${r(this,e)}/mgr/${t}`).pipe(g(i=>i.data.mgr_users),p(i=>{this.mgrStore.setMembers(i)}))}getMgrByInviteLink(t){return this.http.get(`${r(this,e)}/mgr/invite-link/${t}`)}joinMgrByInviteLink(t,i){return this.http.post(`${r(this,e)}/mgr/join/${t}/${i}`,null)}cancelMgrPlan(t){return this.http.post(`${r(this,e)}/mgr/cancel/${t}`,null)}changeMemberPosition(t,i,a){return this.http.post(`${r(this,e)}/mgr/change-member-position/${t}/${i}/${a}`,null)}removeMember(t,i){return this.http.post(`${r(this,e)}/mgr/remove-member/${t}/${i}`,null)}};e=new WeakMap,s.\u0275fac=function(i){return new(i||s)(k(q),k(V),k(ot),k(ct),k(lt))},s.\u0275prov=v({token:s,factory:s.\u0275fac});let n=s;return n})();var bt=n=>({"ng-invalid ng-touched":n});function yt(n,e){if(n&1&&d(0,"ca-form-error",8),n&2){let s=N();B("errors",s.bvn==null?null:s.bvn.errors)}}var Jt=(()=>{let e=class e{constructor(o,t,i,a){this.fb=o,this.modalService=t,this.api=i,this.userStore=a,this.isSubmitted=!1,this.loading=!1,this.form=this.fb.group({bvn:[null,[E.required,E.pattern(/^\d{11}$/),nt()]]},{updateOn:"submit"})}get bvn(){return this.form.get("bvn")}handleSubmit(){this.isSubmitted=!0,!this.form.invalid&&(this.loading=!0,this.api.verifyBvn(this.form.value).subscribe({next:({data:o})=>{this.loading=!1,this.modalService.update(T,"small",{},{success:!0,status:"verification successful",message:`Congratulations! Your identity has been successfully verified
               and your account is now secure. Your new account number for
               transactions is ${o.account_number}.`}),this.userStore.updateBvnStatus(1)},error:o=>{this.loading=!1,this.modalService.update(T,"small",{},{success:!1,status:"verification failed",message:o.error.message})}}))}skipVerification(){this.modalService.close()}};e.\u0275fac=function(t){return new(t||e)(b(J),b(j),b(pt),b(V))},e.\u0275cmp=C({type:e,selectors:[["ca-verify-bvn"]],decls:18,vars:7,consts:[[1,"text-2xl","font-semibold","mb-5"],[1,"mb-7"],[1,"font-medium"],[3,"ngSubmit","formGroup"],[1,""],["for","bvn",1,"font-medium","inline-block","mb-2"],[3,"isRequired"],["type","text","formControlName","bvn","id","bvn","placeholder","Enter your 11 digit BVN number",1,"h-full",3,"ngClass"],[3,"errors"],[1,"mt-14","flex","justify-end","gap-4","sm:gap-7"],["type","button","ca-button-secondary","",1,"w-full","max-w-52",3,"click"],["type","submit","ca-button-primary","",1,"w-full","max-w-52",3,"loading"]],template:function(t,i){t&1&&(c(0,"h2",0),u(1,"Verify your identity"),l(),c(2,"p",1),u(3," To enhance security and protect your account, we require your BVN for verification. Rest assured, your information is handled with the utmost confidentiality. "),c(4,"strong",2),u(5,"Please ensure that the name on your profile matches the name on your BVN to prevent any errors."),l()(),c(6,"form",3),x("ngSubmit",function(){return i.handleSubmit()}),c(7,"div",4)(8,"label",5),u(9,"Bank Verification Number"),l(),c(10,"ca-form-field",6),d(11,"input",7),l(),I(12,yt,1,1,"ca-form-error",8),l(),c(13,"div",9)(14,"button",10),x("click",function(){return i.skipVerification()}),u(15," Skip for now "),l(),c(16,"button",11),u(17," Continue "),l()()()),t&2&&(m(6),B("formGroup",i.form),m(4),B("isRequired",!0),m(),B("ngClass",_(5,bt,i.isSubmitted&&(i.bvn==null?null:i.bvn.invalid))),m(),L(12,i.isSubmitted&&(i.bvn!=null&&i.bvn.invalid)?12:-1),m(4),B("loading",i.loading))},dependencies:[H,Y,Z,O,z,W,X,tt,Q,K,F,et]});let n=e;return n})();export{at as a,ot as b,ct as c,lt as d,pt as e,T as f,Jt as g};
//# sourceMappingURL=chunk-7K5YJ7TS.js.map
